<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CE Lagos Zone 2 - Live Stream</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <style>
        .vjs-matrix.video-js { color: #22c55e; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-slate-950 text-white font-sans overflow-hidden">

    <header class="h-14 border-b border-white/10 flex items-center justify-between px-6 bg-black/50 backdrop-blur-md">
        <div class="flex items-center gap-3">
            <div class="w-3 h-3 bg-red-600 rounded-full animate-ping"></div>
            <h1 class="font-bold tracking-tighter text-lg">CE LAGOS ZONE 2 <span class="text-blue-500">LIVE</span></h1>
        </div>
        <div class="flex items-center gap-6">
            <div class="text-xs text-gray-400">Viewers: <span id="live-counter" class="text-green-500 font-mono font-bold text-sm">0</span></div>
            <button class="bg-blue-700 hover:bg-blue-600 px-4 py-1.5 rounded-full text-xs font-bold transition-all">GIVE ONLINE</button>
        </div>
    </header>

    <main class="flex flex-col lg:flex-row h-[calc(100vh-56px)]">
        <div class="flex-1 bg-black flex flex-col relative">
            <video id="church-stream" class="video-js vjs-big-play-centered w-full h-full" controls preload="auto" data-setup='{}'>
                <source src="https://stream.mux.com/v69RSH02p6P37701Q3uYwa3JuA102w9mOG.m3u8" type="application/x-mpegURL">
            </video>
            
            <div class="p-6 bg-gradient-to-t from-slate-950 to-transparent absolute bottom-0 w-full pointer-events-none">
                <h2 class="text-xl font-bold">Sunday Service: Supernatural Manifestations</h2>
                <p class="text-sm text-gray-400">Lagos Zone 2 Headquarters | Pastor [Name]</p>
            </div>
        </div>

        <aside class="w-full lg:w-96 border-l border-white/10 flex flex-col bg-slate-900/50">
            <div class="p-4 border-b border-white/5 flex justify-between items-center">
                <span class="text-xs font-bold uppercase tracking-widest text-gray-500">Live Chat</span>
                <span class="text-[10px] bg-green-900/30 text-green-500 px-2 py-0.5 rounded">Connected</span>
            </div>

            <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar">
                <div class="text-sm"><span class="text-blue-400 font-bold">Admin:</span> Welcome to Zone 2 Online! Share the link.</div>
            </div>

            <div class="p-4 bg-black/20">
                <div class="flex gap-2 bg-white/5 p-2 rounded-lg border border-white/10 focus-within:border-blue-500 transition-all">
                    <input id="user-msg" type="text" placeholder="Type Amen..." class="bg-transparent flex-1 outline-none text-sm">
                    <button onclick="sendMessage()" class="text-blue-500 font-bold text-xs uppercase">Send</button>
                </div>
            </div>
        </aside>
    </main>

    <script>
        // --- 1. Viewership Tracking Logic ---
        // Normally, you would initialize Firebase here.
        // For this demo, we'll simulate a dynamic viewer count.
        let viewers = Math.floor(Math.random() * (1500 - 800) + 800);
        setInterval(() => {
            viewers += Math.floor(Math.random() * 5) - 2;
            document.getElementById('live-counter').innerText = viewers.toLocaleString();
        }, 3000);

        // --- 2. Chat Logic ---
        function sendMessage() {
            const input = document.getElementById('user-msg');
            const chatBox = document.getElementById('chat-messages');
            if(input.value.trim() !== "") {
                const msg = document.createElement('div');
                msg.className = "text-sm animate-fade-in";
                msg.innerHTML = `<span class="text-gray-400 font-bold">You:</span> ${input.value}`;
                chatBox.appendChild(msg);
                chatBox.scrollTop = chatBox.scrollHeight;
                input.value = "";
            }
        }

        // --- 3. Video.js Init ---
        var player = videojs('church-stream');
        // Video.js handles HLS by default, which allows for automatic resolution switching
    </script>
</body>
</html>